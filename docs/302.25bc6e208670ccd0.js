"use strict";(self.webpackChunkbudget_planner_frontend=self.webpackChunkbudget_planner_frontend||[]).push([[302],{6302:(B,m,a)=>{a.r(m),a.d(m,{EnvelopModule:()=>L});var p=a(6895),_=a(646),e=a(8256),i=a(529),d=a(2340),u=a(2370);let v=(()=>{class o{constructor(t,n){this.httpClient=t,this.localService=n,this.baseURL=d.N.BASEURL}getEnvelops(t){return this.httpClient.get(`${this.baseURL}/envelops`,{headers:new i.WM({Authorization:"Bearer "+this.localService.getJsonValue("token")}),observe:"response",params:t})}addEnvelop(t){let n=this.localService.getJsonValue("userId");return this.httpClient.post(`${this.baseURL}/user/${n}/envelops`,t,{headers:new i.WM({Authorization:"Bearer "+this.localService.getJsonValue("token")})})}updateEnvelop(t){let n=this.localService.getJsonValue("userId");return this.httpClient.put(`${this.baseURL}/user/${n}/envelops/${t.id}`,t,{headers:new i.WM({Authorization:"Bearer "+this.localService.getJsonValue("token")})})}deleteEnvelop(t){let n=this.localService.getJsonValue("userId");return this.httpClient.delete(`${this.baseURL}/user/${n}/envelops/${t}`,{headers:new i.WM({Authorization:"Bearer "+this.localService.getJsonValue("token")})})}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(i.eN),e.LFG(u.C))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})(),f=(()=>{class o{constructor(t,n){this.envelopService=t,this.localService=n,this.userId=null,this.envelops=[]}ngOnInit(){this.userId=this.localService.getJsonValue("userId"),this.getEnvelops()}getEnvelops(){let t={userId:this.userId};this.envelops=[],this.envelopService.getEnvelops(t).subscribe({next:n=>{console.log(n.body),this.envelops=n.body},error:n=>{console.error(n?.error?.error)}})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(v),e.Y36(u.C))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-dashboard"]],decls:2,vars:0,template:function(t,n){1&t&&(e.TgZ(0,"p"),e._uU(1,"dashboard works!"),e.qZA())}}),o})();var s=a(433),h=a(9837);let b=(()=>{class o{constructor(t,n){this.httpClient=t,this.localService=n,this.baseURL=d.N.BASEURL}getUserSalaries(t){return this.httpClient.get(`${this.baseURL}/user-salary`,{headers:new i.WM({Authorization:"Bearer "+this.localService.getJsonValue("token")}),observe:"response",params:t})}addUserSalary(t){let n=this.localService.getJsonValue("userId");return this.httpClient.post(`${this.baseURL}/user/${n}/salary`,t,{headers:new i.WM({Authorization:"Bearer "+this.localService.getJsonValue("token")})})}updateUserSalary(t){let n=this.localService.getJsonValue("userId");return this.httpClient.put(`${this.baseURL}/user/${n}/salary/${t.id}`,t,{headers:new i.WM({Authorization:"Bearer "+this.localService.getJsonValue("token")})})}deleteUserSalary(t){let n=this.localService.getJsonValue("userId");return this.httpClient.delete(`${this.baseURL}/user/${n}/salary/${t}`,{headers:new i.WM({Authorization:"Bearer "+this.localService.getJsonValue("token")})})}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(i.eN),e.LFG(u.C))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})(),S=(()=>{class o{constructor(t,n){this.httpClient=t,this.localService=n,this.baseURL=d.N.BASEURL}getUserAccounts(t){return this.httpClient.get(`${this.baseURL}/user-accounts`,{headers:new i.WM({Authorization:"Bearer "+this.localService.getJsonValue("token")}),observe:"response",params:t})}addUserAccount(t){let n=this.localService.getJsonValue("userId");return this.httpClient.post(`${this.baseURL}/user/${n}/accounts`,t,{headers:new i.WM({Authorization:"Bearer "+this.localService.getJsonValue("token")})})}updateUserAccount(t){let n=this.localService.getJsonValue("userId");return this.httpClient.put(`${this.baseURL}/user/${n}/accounts/${t.id}`,t,{headers:new i.WM({Authorization:"Bearer "+this.localService.getJsonValue("token")})})}deleteUserAccount(t){let n=this.localService.getJsonValue("userId");return this.httpClient.delete(`${this.baseURL}/user/${n}/accounts/${t}`,{headers:new i.WM({Authorization:"Bearer "+this.localService.getJsonValue("token")})})}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(i.eN),e.LFG(u.C))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var y=a(9597);const C=["messageTemplate"],Z=["envelopModal"],A=["salaryModal"];function T(o,r){1&o&&e._UZ(0,"button",13)}function U(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"button",14),e.NdJ("click",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.onAddClick())}),e._uU(1," Add Envelop "),e.qZA()}}function I(o,r){1&o&&e._UZ(0,"button",13)}function E(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"button",15),e.NdJ("click",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.onAddSalaryClick())}),e._uU(1," Add Salary "),e.qZA()}}function x(o,r){1&o&&(e.TgZ(0,"div",7)(1,"div",16)(2,"div",17)(3,"div",18)(4,"h5",19)(5,"div",20),e._UZ(6,"span",21)(7,"span",22),e.qZA()()()()(),e.TgZ(8,"div",16)(9,"div",17)(10,"div",18)(11,"h5",19)(12,"div",20),e._UZ(13,"span",21)(14,"span",22),e.qZA()()()()(),e.TgZ(15,"div",16)(16,"div",17)(17,"div",18)(18,"h5",19)(19,"div",20),e._UZ(20,"span",21)(21,"span",22),e.qZA()()()()(),e.TgZ(22,"div",16)(23,"div",17)(24,"div",18)(25,"h5",19)(26,"div",20),e._UZ(27,"span",21)(28,"span",22),e.qZA()()()()()())}function k(o,r){if(1&o&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA()()),2&o){const t=r.$implicit,n=r.index;e.xp6(2),e.Oqu(n+1),e.xp6(2),e.Oqu(t.payee),e.xp6(2),e.Oqu(t.amount)}}function F(o,r){if(1&o&&(e.ynx(0),e.TgZ(1,"div",31)(2,"table",32)(3,"thead")(4,"tr")(5,"th"),e._uU(6,"Sr no."),e.qZA(),e.TgZ(7,"th"),e._uU(8,"Payee"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"Amount"),e.qZA()()(),e.TgZ(11,"tbody"),e.YNc(12,k,7,3,"tr",8),e.qZA()()(),e.BQk()),2&o){const t=e.oxw(2).$implicit;e.xp6(12),e.Q6J("ngForOf",t.spendings)}}function J(o,r){if(1&o&&(e.TgZ(0,"div",29),e.YNc(1,F,13,1,"ng-container",30),e.qZA()),2&o){const t=e.oxw().$implicit;e.oxw();const n=e.MAs(16);e.xp6(1),e.Q6J("ngIf",t.spendings&&t.spendings.length>0)("ngIfElse",n)}}function w(o,r){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",16)(2,"div",23)(3,"div",18)(4,"div",24),e.NdJ("click",function(){const c=e.CHM(t).$implicit,g=e.oxw();return e.KtG(g.onUpdateClick(c))}),e.TgZ(5,"h5",25),e._uU(6),e.qZA(),e.TgZ(7,"h5",25),e._uU(8),e.ALo(9,"currency"),e.qZA()(),e.TgZ(10,"div",26)(11,"ngb-progressbar",27),e.NdJ("click",function(){const c=e.CHM(t).$implicit;return e.KtG(c.showSpending=!c.showSpending)}),e._uU(12),e.ALo(13,"currency"),e.qZA()(),e.YNc(14,J,2,2,"div",28),e.qZA()()(),e.BQk()}if(2&o){const t=r.$implicit;e.xp6(6),e.Oqu(t.name),e.xp6(2),e.Oqu(e.xi3(9,8,t.amount,"INR")),e.xp6(3),e.s9C("type",t.type),e.Q6J("value",t.totalSpending/t.amount*100)("striped",!0)("animated",!0),e.xp6(1),e.hij(" ",e.xi3(13,11,t.totalSpending,"INR")," "),e.xp6(2),e.Q6J("ngIf",t.showSpending)}}function q(o,r){1&o&&(e.TgZ(0,"h6",33),e._uU(1,"No spending yet :)"),e.qZA())}function N(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div",34)(1,"h4",35),e._uU(2),e.qZA(),e.TgZ(3,"button",36),e.NdJ("click",function(){const c=e.CHM(t).$implicit;return e.KtG(c.dismiss())}),e.qZA()(),e.TgZ(4,"div",37)(5,"div",38)(6,"form",39)(7,"div",40),e._UZ(8,"input",41),e.TgZ(9,"label",42),e._uU(10,"Name"),e.qZA(),e.TgZ(11,"div",43),e._uU(12," Name must be specified "),e.qZA()(),e.TgZ(13,"div",40),e._UZ(14,"input",44),e.TgZ(15,"label",45),e._uU(16,"Budget Amount"),e.qZA(),e.TgZ(17,"div",43),e._uU(18," Amount must be specified "),e.qZA()()()()(),e.TgZ(19,"div",46)(20,"button",47),e.NdJ("click",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.onSaveClick())}),e._uU(21,"Save"),e.qZA()()}if(2&o){const t=e.oxw();let n,l;e.xp6(2),e.Oqu(t.isAddOperation?"Add Envelop":t.isUpdateOperation?"Update Envelop":"Envelop"),e.xp6(4),e.Q6J("formGroup",t.envelopForm),e.xp6(2),e.Q6J("ngClass",(null!=(n=t.envelopForm.get("name"))&&n.dirty||null!=(n=t.envelopForm.get("name"))&&n.touched)&&null!=(n=t.envelopForm.get("name"))&&n.invalid?"is-invalid":""),e.xp6(6),e.Q6J("ngClass",(null!=(l=t.envelopForm.get("amount"))&&l.dirty||null!=(l=t.envelopForm.get("amount"))&&l.touched)&&null!=(l=t.envelopForm.get("amount"))&&l.invalid?"is-invalid":"")}}function M(o,r){if(1&o&&(e.TgZ(0,"option",58),e._uU(1),e.qZA()),2&o){const t=r.$implicit;e.Q6J("ngValue",t.id),e.xp6(1),e.Oqu(t.name)}}function $(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div",34)(1,"h4",35),e._uU(2),e.qZA(),e.TgZ(3,"button",36),e.NdJ("click",function(){const c=e.CHM(t).$implicit;return e.KtG(c.dismiss())}),e.qZA()(),e.TgZ(4,"div",37)(5,"div",38)(6,"form",39)(7,"div",40),e._UZ(8,"input",48),e.TgZ(9,"label",49),e._uU(10,"Salary"),e.qZA(),e.TgZ(11,"div",43),e._uU(12," Salary must be specified "),e.qZA()(),e.TgZ(13,"div",40)(14,"select",50)(15,"option",51),e._uU(16,"Select salary type"),e.qZA(),e.TgZ(17,"option",52),e._uU(18,"Job"),e.qZA(),e.TgZ(19,"option",53),e._uU(20,"Freelancing"),e.qZA()(),e.TgZ(21,"label",54),e._uU(22,"Salary Type"),e.qZA()(),e.TgZ(23,"div",40)(24,"select",55)(25,"option",51),e._uU(26,"Select account"),e.qZA(),e.YNc(27,M,2,2,"option",56),e.qZA(),e.TgZ(28,"label",57),e._uU(29,"Account"),e.qZA()()()()(),e.TgZ(30,"div",46)(31,"button",47),e.NdJ("click",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.onSaveClick())}),e._uU(32,"Save"),e.qZA()()}if(2&o){const t=e.oxw();let n;e.xp6(2),e.Oqu(t.isAddOperation?"Add Salary":t.isUpdateOperation?"Update Salary":"Salary"),e.xp6(4),e.Q6J("formGroup",t.userSalaryForm),e.xp6(2),e.Q6J("ngClass",(null!=(n=t.userSalaryForm.get("salary"))&&n.dirty||null!=(n=t.userSalaryForm.get("salary"))&&n.touched)&&null!=(n=t.userSalaryForm.get("salary"))&&n.invalid?"is-invalid":""),e.xp6(19),e.Q6J("ngForOf",t.accounts)}}function O(o,r){if(1&o&&(e.TgZ(0,"span",59)(1,"strong"),e._uU(2),e.qZA()()),2&o){const t=e.oxw();e.xp6(2),e.Oqu(t.message)}}const G=[{path:"dashboard",component:f},{path:"",component:(()=>{class o{constructor(t,n,l,c,g,Y){this.envelopService=t,this.localService=n,this.modalService=l,this.salaryService=c,this.accountService=g,this.toastService=Y,this.message="",this.envelops=[],this.totalMonthlyBudget=0,this.isGetCompleted=!0,this.isAddOperation=!1,this.isUpdateOperation=!1,this.userSalaries=[],this.accounts=[]}ngOnInit(){this.getUserSalaries(),this.getEnvelops()}getEnvelops(){let t={userId:this.localService.getJsonValue("userId")};this.isGetCompleted=!1,this.envelopService.getEnvelops(t).subscribe({next:n=>{this.envelops=n.body,this.calculateTotalSpending(),console.log(n.body)},error:n=>{console.error(n),alert(n?.error?.error)}}).add(()=>{this.isGetCompleted=!0})}calculateTotalSpending(){for(let t=0;t<this.envelops.length;t++){const n=this.envelops[t];this.totalMonthlyBudget+=parseInt(this.envelops[t].amount.toString()),n.showSpending=!1,n.totalSpending=0;for(let l=0;l<n.spendings.length;l++)n.totalSpending+=parseInt(n.spendings[l].amount);n.type=n.totalSpending/parseInt(n.amount.toString())*100<=50?"success":n.totalSpending/parseInt(n.amount.toString())*100<=75?"warning":"danger"}}onProgressClick(t){this.currentEnvelop=t}createEnvelopForm(){this.envelopForm=new s.cw({id:new s.NI(null),name:new s.NI(null,[s.kI.required]),amount:new s.NI(0,[s.kI.required,s.kI.min(1)]),userId:new s.NI(this.localService.getJsonValue("userId")),salaryId:new s.NI(null,[s.kI.required])})}onAddClick(){this.isAddOperation=!0,this.isUpdateOperation=!1,this.createEnvelopForm(),this.openModal(this.envelopModal)}onUpdateClick(t){this.isAddOperation=!1,this.isUpdateOperation=!0,this.createEnvelopForm(),this.envelopForm.patchValue(t),this.openModal(this.envelopModal)}onDeleteClick(){}onSaveClick(){console.log(this.envelopForm.controls),this.envelopForm.invalid?this.envelopForm.markAllAsTouched():this.isUpdateOperation?this.updateEnvelop():this.addEnvelop()}addEnvelop(){this.envelopService.addEnvelop(this.envelopForm.value).subscribe({next:t=>{console.log(t),this.modalRef.close(),this.getEnvelops()},error:t=>{console.error(t),alert(t?.error?.error)}})}updateEnvelop(){this.envelopService.updateEnvelop(this.envelopForm.value).subscribe({next:t=>{console.log(t),this.modalRef.close(),this.getEnvelops()},error:t=>{console.error(t),alert(t?.error?.error)}})}openModal(t,n="lg",l){l||(l={backdrop:"static",size:n,keyboard:!1}),this.modalRef=this.modalService.open(t,l)}getUserSalaries(){this.userSalaries=[],this.salaryService.getUserSalaries().subscribe({next:t=>{this.userSalaries=t.body},error:t=>{console.error(t)}})}createSalaryForm(){this.userSalaryForm=new s.cw({id:new s.NI(null),accountId:new s.NI(null,[s.kI.required]),salary:new s.NI(0,[s.kI.required]),salaryType:new s.NI(null,[s.kI.required])})}onAddSalaryClick(){this.isAddOperation=!0,this.isUpdateOperation=!1,0==this.accounts?.length&&this.getUserAccounts(),this.createSalaryForm(),this.openModal(this.salaryModal)}getUserAccounts(){let t={userId:this.localService.getJsonValue("userId")};this.accountService.getUserAccounts(t).subscribe({next:n=>{console.log(n),this.accounts=n.body,this.modalRef.close()},error:n=>{console.error(n),this.message=n?.error?.error,this.toastService.show(this.messageTemplate,{classname:"bg-danger text-light",delay:5e3})}})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(v),e.Y36(u.C),e.Y36(h.FF),e.Y36(b),e.Y36(S),e.Y36(y.k))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-envelop"]],viewQuery:function(t,n){if(1&t&&(e.Gf(C,5),e.Gf(Z,5),e.Gf(A,5)),2&t){let l;e.iGM(l=e.CRH())&&(n.messageTemplate=l.first),e.iGM(l=e.CRH())&&(n.envelopModal=l.first),e.iGM(l=e.CRH())&&(n.salaryModal=l.first)}},decls:23,vars:11,consts:[[1,"container","pt-5"],[1,"d-flex","justify-content-between","mb-3"],[1,"d-flex","justify-content-start"],["class","btn btn-dark disabled placeholder w-10",4,"ngIf"],["type","button","class","btn btn-dark",3,"click",4,"ngIf"],["type","button","class","btn btn-dark ms-3",3,"click",4,"ngIf"],["class","row row-cols-1 row-cols-md-4 g-4",4,"ngIf"],[1,"row","row-cols-1","row-cols-md-4","g-4"],[4,"ngFor","ngForOf"],["noSpendingTemplate",""],["envelopModal",""],["salaryModal",""],["messageTemplate",""],[1,"btn","btn-dark","disabled","placeholder","w-10"],["type","button",1,"btn","btn-dark",3,"click"],["type","button",1,"btn","btn-dark","ms-3",3,"click"],[1,"col"],["aria-hidden","true",1,"card","h-100"],[1,"card-body"],[1,"card-title","placeholder-glow"],[1,"d-flex","justify-content-between"],[1,"placeholder","rounded","w-50"],[1,"placeholder","rounded","w-25"],[1,"card","h-100"],[1,"d-flex","justify-content-between","cursor-pointer",3,"click"],[1,"card-title"],[1,"py-3"],[1,"cursor-pointer",3,"type","value","striped","animated","click"],["class","pb-3",4,"ngIf"],[1,"pb-3"],[4,"ngIf","ngIfElse"],[1,"table-responsive"],[1,"table","table-borderless"],[1,"text-center"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"row"],[3,"formGroup"],[1,"form-floating","mb-3"],["formControlName","name","type","text","id","nameFloatingInput","placeholder","Eg.: Shopping",1,"form-control",3,"ngClass"],["for","nameFloatingInput"],[1,"invalid-feedback"],["formControlName","amount","type","number","id","amountFloatingInput","placeholder","Eg.: 1000",1,"form-control",3,"ngClass"],["for","amountFloatingInput"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-dark",3,"click"],["formControlName","salary","type","number","id","salaryFloatingInput","placeholder","Eg.: Shopping",1,"form-control",3,"ngClass"],["for","salaryFloatingInput"],["formControlName","salaryType","id","floatingSelectSalaryType","aria-label","Select salary",1,"form-select"],["value","null"],["value","Job"],["value","Freelancing"],["for","floatingSelectSalaryType"],["formControlName","accountId","id","floatingSelectAccountId","aria-label","Select account",1,"form-select"],[3,"ngValue",4,"ngFor","ngForOf"],["for","floatingSelectAccountId"],[3,"ngValue"],[1,"toast-font"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h3"),e._uU(3),e.qZA(),e.TgZ(4,"h3"),e._uU(5),e.ALo(6,"currency"),e.qZA(),e.TgZ(7,"div",2),e.YNc(8,T,1,0,"button",3),e.YNc(9,U,2,0,"button",4),e.YNc(10,I,1,0,"button",3),e.YNc(11,E,2,0,"button",5),e.qZA()(),e.YNc(12,x,29,0,"div",6),e.TgZ(13,"div",7),e.YNc(14,w,15,14,"ng-container",8),e.qZA()(),e.YNc(15,q,2,0,"ng-template",null,9,e.W1O),e.YNc(17,N,22,4,"ng-template",null,10,e.W1O),e.YNc(19,$,33,4,"ng-template",null,11,e.W1O),e.YNc(21,O,3,1,"ng-template",null,12,e.W1O)),2&t&&(e.xp6(3),e.hij("Total envelops - ",(null==n.envelops?null:n.envelops.length)||0,""),e.xp6(2),e.hij("Monthly budget - ",e.xi3(6,8,n.totalMonthlyBudget,"INR"),""),e.xp6(3),e.Q6J("ngIf",!n.isGetCompleted),e.xp6(1),e.Q6J("ngIf",n.isGetCompleted),e.xp6(1),e.Q6J("ngIf",!n.isGetCompleted),e.xp6(1),e.Q6J("ngIf",n.isGetCompleted),e.xp6(1),e.Q6J("ngIf",!n.isGetCompleted),e.xp6(2),e.Q6J("ngForOf",n.envelops))},dependencies:[p.mk,p.sg,p.O5,h.Ly,s._Y,s.YN,s.Kr,s.Fj,s.wV,s.EJ,s.JJ,s.JL,s.sg,s.u,p.H9]}),o})()}];let R=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[_.Bz.forChild(G),_.Bz]}),o})();var V=a(4466);let L=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({providers:[v],imports:[p.ez,R,h.IJ,V.m]}),o})()}}]);