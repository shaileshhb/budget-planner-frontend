"use strict";(self.webpackChunkbudget_planner_frontend=self.webpackChunkbudget_planner_frontend||[]).push([[957],{1957:(w,d,r)=>{r.r(d),r.d(d,{AccountModule:()=>U});var l=r(6895),m=r(646),i=r(433),t=r(8256),u=r(529),h=r(2340),g=r(2370);let _=(()=>{class n{constructor(e,o){this.httpClient=e,this.localService=o,this.baseURL=h.N.BASEURL}getAccounts(e){return this.httpClient.get(`${this.baseURL}/user-accounts`,{headers:new u.WM({Authorization:"Bearer "+this.localService.getJsonValue("token")}),observe:"response",params:e})}addUserAccount(e){let o=this.localService.getJsonValue("userId");return this.httpClient.post(`${this.baseURL}/user/${o}/accounts`,e,{headers:new u.WM({Authorization:"Bearer "+this.localService.getJsonValue("token")})})}updateUserAccount(e){let o=this.localService.getJsonValue("userId");return this.httpClient.put(`${this.baseURL}/user/${o}/accounts/${e.id}`,e,{headers:new u.WM({Authorization:"Bearer "+this.localService.getJsonValue("token")})})}deleteUserAccount(e){let o=this.localService.getJsonValue("userId");return this.httpClient.delete(`${this.baseURL}/user/${o}/accounts/${e}`,{headers:new u.WM({Authorization:"Bearer "+this.localService.getJsonValue("token")})})}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(u.eN),t.LFG(g.C))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var p=r(9597);const A=["messageTemplate"];function f(n,s){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"tr",12),t.NdJ("click",function(){t.CHM(e);const c=t.oxw().$implicit,a=t.oxw(2);return t.KtG(a.onEditClick(c))}),t.TgZ(2,"td",9),t._uU(3),t.qZA(),t.TgZ(4,"td"),t._uU(5),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.TgZ(8,"td",9)(9,"button",13),t.NdJ("click",function(c){t.CHM(e);const a=t.oxw().$implicit,S=t.oxw(2);return t.KtG(S.onDeleteClick(c,a))}),t.TgZ(10,"i",14),t._uU(11,"delete"),t.qZA()()()(),t.BQk()}if(2&n){const e=t.oxw(),o=e.index,c=e.$implicit;t.xp6(3),t.Oqu(o+1),t.xp6(2),t.Oqu(c.name),t.xp6(2),t.Oqu(c.amount)}}function b(n,s){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"tr",15)(2,"td",9)(3,"button",16),t.NdJ("click",function(){t.CHM(e);const c=t.oxw(3);return t.KtG(c.onSubmitClick())}),t.TgZ(4,"i",17),t._uU(5,"check_circle"),t.qZA()()(),t.TgZ(6,"td"),t._UZ(7,"input",18),t.qZA(),t.TgZ(8,"td"),t._UZ(9,"input",19),t.qZA(),t.TgZ(10,"td",9)(11,"button",20),t.NdJ("click",function(){t.CHM(e);const c=t.oxw().$implicit,a=t.oxw(2);return t.KtG(a.cancelEdit(c))}),t.TgZ(12,"i",17),t._uU(13,"cancel"),t.qZA()()()(),t.BQk()}}function T(n,s){if(1&n&&(t.ynx(0),t.YNc(1,f,12,3,"ng-container",3),t.YNc(2,b,14,0,"ng-container",3),t.BQk()),2&n){const e=s.$implicit,o=t.oxw(2);t.xp6(1),t.Q6J("ngIf",!e.isEditClicked),t.xp6(1),t.Q6J("ngIf",e.isEditClicked&&o.isEditOperation)}}function v(n,s){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"tr",15)(2,"td",9)(3,"button",16),t.NdJ("click",function(){t.CHM(e);const c=t.oxw(2);return t.KtG(c.onSubmitClick())}),t.TgZ(4,"i",17),t._uU(5,"check_circle"),t.qZA()()(),t.TgZ(6,"td"),t._UZ(7,"input",18),t.qZA(),t.TgZ(8,"td"),t._UZ(9,"input",19),t.qZA(),t.TgZ(10,"td",9)(11,"button",20),t.NdJ("click",function(){t.CHM(e);const c=t.oxw(2);return t.KtG(c.cancelAdd())}),t.TgZ(12,"i",17),t._uU(13,"cancel"),t.qZA()()()(),t.BQk()}}function x(n,s){if(1&n&&(t.ynx(0),t.TgZ(1,"form",6)(2,"div",7)(3,"table",8)(4,"thead")(5,"tr")(6,"th",9),t._uU(7,"Sr No"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"Name"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"Amount"),t.qZA(),t.TgZ(12,"th",9),t._uU(13,"Delete"),t.qZA()()(),t.TgZ(14,"tbody",10),t.YNc(15,T,3,2,"ng-container",11),t.YNc(16,v,14,0,"ng-container",3),t.qZA()()()(),t.BQk()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("formGroup",e.accountForm),t.xp6(14),t.Q6J("ngForOf",e.userAccounts),t.xp6(1),t.Q6J("ngIf",e.isAddOperation)}}function Z(n,s){if(1&n&&(t.TgZ(0,"span",21)(1,"strong"),t._uU(2),t.qZA()()),2&n){const e=t.oxw();t.xp6(2),t.Oqu(e.message)}}function C(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"div",22)(1,"h4",23),t._uU(2,"Delete Confirmation"),t.qZA(),t.TgZ(3,"button",24),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.KtG(a.dismiss())}),t.qZA()(),t.TgZ(4,"div",25)(5,"h4"),t._uU(6,"Are you sure you want to continue?"),t.qZA()(),t.TgZ(7,"div",26)(8,"button",27),t._uU(9,"Yes"),t.qZA(),t.TgZ(10,"button",28),t._uU(11,"No"),t.qZA()()}}const k=[{path:"",component:(()=>{class n{constructor(e,o,c){this.accountService=e,this.localService=o,this.toastService=c,this.userAccounts=[],this.totalAmount=0,this.message="",this.isAddOperation=!1,this.isEditOperation=!1}ngOnInit(){this.createAccountForm(),this.getUserAccounts()}createAccountForm(){this.accountForm=new i.cw({id:new i.NI(null),name:new i.NI(null,[i.kI.required]),userId:new i.NI(this.localService.getJsonValue("userId")),amount:new i.NI(0,[i.kI.required,i.kI.min(1)])})}getUserAccounts(){this.userAccounts=[],this.totalAmount=0;const e={userId:this.localService.getJsonValue("userId")};this.accountService.getAccounts(e).subscribe({next:o=>{this.userAccounts=o.body,console.log(this.userAccounts),this.calculateTotalAmount()},error:o=>{console.error(o),this.message=o?.error?.error,this.toastService.show(this.messageTemplate,{classname:"bg-danger text-light",delay:5e3})}})}calculateTotalAmount(){this.userAccounts.filter(e=>{this.totalAmount+=parseInt(e.amount),e.isEditClicked=!1})}onAddClick(){this.isAddOperation=!0,this.isEditOperation=!1,this.createAccountForm()}cancelAdd(){this.isAddOperation=!1,this.accountForm.reset()}onEditClick(e){this.isAddOperation=!1,this.isEditOperation=!0,e.isEditClicked=!0,this.createAccountForm(),this.accountForm.patchValue(e)}cancelEdit(e){e.isEditClicked=!1,this.isEditOperation=!1,this.accountForm.reset()}onDeleteClick(e,o){e.stopPropagation(),console.log(o)}onSubmitClick(){console.log(this.accountForm.controls),this.accountForm.invalid?this.accountForm.markAllAsTouched():this.isAddOperation?this.addUserAccount():this.updateUserAccount()}addUserAccount(){this.message="Adding account",this.toastService.show(this.messageTemplate,{classname:"bg-info text-light",delay:1e3}),this.accountService.addUserAccount(this.accountForm.value).subscribe({next:e=>{console.log(e),this.message="Account successfully added",this.toastService.clear(),this.accountForm.reset(),this.isAddOperation=!1,this.toastService.show(this.messageTemplate,{classname:"bg-success text-light",delay:5e3}),this.getUserAccounts()},error:e=>{console.error(e),this.message=e?.error?.error,this.toastService.clear(),this.toastService.show(this.messageTemplate,{classname:"bg-danger text-light",delay:5e3})}}).add(()=>{})}updateUserAccount(){this.message="Updating account",this.toastService.show(this.messageTemplate,{classname:"bg-info text-light",delay:1e3}),this.accountService.updateUserAccount(this.accountForm.value).subscribe({next:e=>{console.log(e),this.message="Account successfully updated",this.isEditOperation=!1,this.toastService.clear(),this.getUserAccounts(),this.toastService.show(this.messageTemplate,{classname:"bg-success text-light",delay:5e3})},error:e=>{console.error(e),this.message=e?.error?.error,this.toastService.show(this.messageTemplate,{classname:"bg-danger text-light",delay:5e3})}}).add(()=>{})}deleteUserAccount(e){this.message="Deleting account",this.toastService.show(this.messageTemplate,{classname:"bg-info text-light",delay:1e3}),this.accountService.deleteUserAccount(e).subscribe({next:o=>{console.log(o),this.message="Account successfully deleted",this.toastService.clear(),this.getUserAccounts(),this.toastService.show(this.messageTemplate,{classname:"bg-success text-light",delay:5e3})},error:o=>{console.error(o),this.message=o?.error?.error,this.toastService.show(this.messageTemplate,{classname:"bg-danger text-light",delay:5e3})}})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(_),t.Y36(g.C),t.Y36(p.k))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-account"]],viewQuery:function(e,o){if(1&e&&t.Gf(A,5),2&e){let c;t.iGM(c=t.CRH())&&(o.messageTemplate=c.first)}},decls:12,vars:6,consts:[[1,"container","pt-5"],[1,"d-flex","justify-content-between","mb-3"],["type","button",1,"btn","btn-dark",3,"disabled","click"],[4,"ngIf"],["messageTemplate",""],["deleteModal",""],[3,"formGroup"],[1,"table-responsive"],[1,"table","table-bordered","table-hover"],[1,"text-center"],[1,"cursor-pointer"],[4,"ngFor","ngForOf"],[3,"click"],["type","button",1,"btn",3,"click"],[1,"material-icons-outlined","text-danger"],[1,"no-hover"],["type","submit",1,"btn",3,"click"],[1,"material-icons-outlined"],["type","text","formControlName","name","placeholder","Eg: My Account",1,"form-control"],["type","number","formControlName","amount","placeholder","Eg: 10000",1,"form-control"],["type","reset",1,"btn",3,"click"],[1,"toast-font"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-success"],["type","button",1,"btn","btn-outline-danger"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h3"),t._uU(3),t.ALo(4,"currency"),t.qZA(),t.TgZ(5,"button",2),t.NdJ("click",function(){return o.onAddClick()}),t._uU(6," Add Account "),t.qZA()(),t.YNc(7,x,17,3,"ng-container",3),t.qZA(),t.YNc(8,Z,3,1,"ng-template",null,4,t.W1O),t.YNc(10,C,12,0,"ng-template",null,5,t.W1O)),2&e&&(t.xp6(3),t.hij("Total amount - ",t.xi3(4,3,o.totalAmount,"INR"),""),t.xp6(2),t.Q6J("disabled",o.isAddOperation||o.isEditOperation),t.xp6(2),t.Q6J("ngIf",o.userAccounts.length>0||o.isAddOperation))},dependencies:[l.sg,l.O5,i._Y,i.Fj,i.wV,i.JJ,i.JL,i.sg,i.u,l.H9],styles:[".no-hover[_ngcontent-%COMP%]:hover{background-color:#fff!important}"]}),n})()}];let y=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[m.Bz.forChild(k),m.Bz]}),n})(),U=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[l.ez,i.UX,y]}),n})()}}]);