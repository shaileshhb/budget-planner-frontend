"use strict";(self.webpackChunkbudget_planner_frontend=self.webpackChunkbudget_planner_frontend||[]).push([[634],{3634:(B,m,s)=>{s.r(m),s.d(m,{EnvelopModule:()=>R});var a=s(6895),g=s(646),e=s(8256),d=s(529),_=s(2340),c=s(2370);let u=(()=>{class t{constructor(n,o){this.httpClient=n,this.localService=o,this.baseURL=_.N.BASEURL}getEnvelops(n){return this.httpClient.get(`${this.baseURL}/envelops`,{headers:new d.WM({Authorization:"Bearer "+this.localService.getJsonValue("token")}),observe:"response",params:n})}addEnvelop(n){let o=this.localService.getJsonValue("userId");return this.httpClient.post(`${this.baseURL}/user/${o}/envelops`,n,{headers:new d.WM({Authorization:"Bearer "+this.localService.getJsonValue("token")})})}updateEnvelop(n){let o=this.localService.getJsonValue("userId");return this.httpClient.put(`${this.baseURL}/user/${o}/envelops/${n.id}`,n,{headers:new d.WM({Authorization:"Bearer "+this.localService.getJsonValue("token")})})}deleteEnvelop(n){let o=this.localService.getJsonValue("userId");return this.httpClient.delete(`${this.baseURL}/user/${o}/envelops/${n}`,{headers:new d.WM({Authorization:"Bearer "+this.localService.getJsonValue("token")})})}}return t.\u0275fac=function(n){return new(n||t)(e.LFG(d.eN),e.LFG(c.C))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),h=(()=>{class t{constructor(n,o){this.envelopService=n,this.localService=o,this.userId=null,this.envelops=[]}ngOnInit(){this.userId=this.localService.getJsonValue("userId"),this.getEnvelops()}getEnvelops(){let n={userId:this.userId};this.envelops=[],this.envelopService.getEnvelops(n).subscribe({next:o=>{console.log(o.body),this.envelops=o.body},error:o=>{console.error(o?.error?.error)}})}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(u),e.Y36(c.C))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-dashboard"]],decls:2,vars:0,template:function(n,o){1&n&&(e.TgZ(0,"p"),e._uU(1,"dashboard works!"),e.qZA())}}),t})();var r=s(433),v=s(9837),f=s(9597);const Z=["messageTemplate"],C=["envelopModal"];function x(t,l){1&t&&e._UZ(0,"button",11)}function b(t,l){if(1&t){const n=e.EpF();e.TgZ(0,"button",12),e.NdJ("click",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.onAddClick())}),e._uU(1," Add Envelop "),e.qZA()}}function E(t,l){1&t&&(e.TgZ(0,"div",6)(1,"div",13)(2,"div",14)(3,"div",15)(4,"h5",16)(5,"div",17),e._UZ(6,"span",18)(7,"span",19),e.qZA()()()()(),e.TgZ(8,"div",13)(9,"div",14)(10,"div",15)(11,"h5",16)(12,"div",17),e._UZ(13,"span",18)(14,"span",19),e.qZA()()()()(),e.TgZ(15,"div",13)(16,"div",14)(17,"div",15)(18,"h5",16)(19,"div",17),e._UZ(20,"span",18)(21,"span",19),e.qZA()()()()(),e.TgZ(22,"div",13)(23,"div",14)(24,"div",15)(25,"h5",16)(26,"div",17),e._UZ(27,"span",18)(28,"span",19),e.qZA()()()()()())}function T(t,l){if(1&t&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA()()),2&t){const n=l.$implicit,o=l.index;e.xp6(2),e.Oqu(o+1),e.xp6(2),e.Oqu(n.payee),e.xp6(2),e.Oqu(n.amount)}}function I(t,l){if(1&t&&(e.ynx(0),e.TgZ(1,"div",28)(2,"table",29)(3,"thead")(4,"tr")(5,"th"),e._uU(6,"Sr no."),e.qZA(),e.TgZ(7,"th"),e._uU(8,"Payee"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"Amount"),e.qZA()()(),e.TgZ(11,"tbody"),e.YNc(12,T,7,3,"tr",7),e.qZA()()(),e.BQk()),2&t){const n=e.oxw(2).$implicit;e.xp6(12),e.Q6J("ngForOf",n.spendings)}}function A(t,l){if(1&t&&(e.TgZ(0,"div",26),e.YNc(1,I,13,1,"ng-container",27),e.qZA()),2&t){const n=e.oxw().$implicit;e.oxw();const o=e.MAs(14);e.xp6(1),e.Q6J("ngIf",n.spendings&&n.spendings.length>0)("ngIfElse",o)}}function y(t,l){if(1&t){const n=e.EpF();e.ynx(0),e.TgZ(1,"div",13)(2,"div",20)(3,"div",15)(4,"div",21),e.NdJ("click",function(){const p=e.CHM(n).$implicit,$=e.oxw();return e.KtG($.onUpdateClick(p))}),e.TgZ(5,"h5",22),e._uU(6),e.qZA(),e.TgZ(7,"h5",22),e._uU(8),e.ALo(9,"currency"),e.qZA()(),e.TgZ(10,"div",23)(11,"ngb-progressbar",24),e.NdJ("click",function(){const p=e.CHM(n).$implicit;return e.KtG(p.showSpending=!p.showSpending)}),e._uU(12),e.ALo(13,"currency"),e.qZA()(),e.YNc(14,A,2,2,"div",25),e.qZA()()(),e.BQk()}if(2&t){const n=l.$implicit;e.xp6(6),e.Oqu(n.name),e.xp6(2),e.Oqu(e.xi3(9,8,n.amount,"INR")),e.xp6(3),e.s9C("type",n.type),e.Q6J("value",n.totalSpending/n.amount*100)("striped",!0)("animated",!0),e.xp6(1),e.hij(" ",e.xi3(13,11,n.totalSpending,"INR")," "),e.xp6(2),e.Q6J("ngIf",n.showSpending)}}function S(t,l){1&t&&(e.TgZ(0,"h6",30),e._uU(1,"No spending yet :)"),e.qZA())}function F(t,l){1&t&&(e.TgZ(0,"div",46),e._uU(1," Name must be specified "),e.qZA())}function U(t,l){1&t&&(e.TgZ(0,"div",46),e._uU(1," Invalid name specified "),e.qZA())}function k(t,l){1&t&&(e.TgZ(0,"div",46),e._uU(1," Name cannot consist of more than 255 characters "),e.qZA())}function q(t,l){if(1&t&&(e.TgZ(0,"div"),e.YNc(1,F,2,0,"div",45),e.YNc(2,U,2,0,"div",45),e.YNc(3,k,2,0,"div",45),e.qZA()),2&t){const n=e.oxw(2);e.xp6(1),e.Q6J("ngIf",n.envelopForm.get("name").errors.required),e.xp6(1),e.Q6J("ngIf",n.envelopForm.get("name").errors.minlenght),e.xp6(1),e.Q6J("ngIf",n.envelopForm.get("name").errors.maxlenght)}}function w(t,l){1&t&&(e.TgZ(0,"div",46),e._uU(1," Amount must be specified "),e.qZA())}function J(t,l){1&t&&(e.TgZ(0,"div",46),e._uU(1," Invalid amount specified "),e.qZA())}function N(t,l){if(1&t&&(e.TgZ(0,"div"),e.YNc(1,w,2,0,"div",45),e.YNc(2,J,2,0,"div",45),e.qZA()),2&t){const n=e.oxw(2);e.xp6(1),e.Q6J("ngIf",n.envelopForm.get("amount").errors.required),e.xp6(1),e.Q6J("ngIf",n.envelopForm.get("amount").errors.min)}}function M(t,l){if(1&t){const n=e.EpF();e.TgZ(0,"div",31)(1,"h4",32),e._uU(2),e.qZA(),e.TgZ(3,"button",33),e.NdJ("click",function(){const p=e.CHM(n).$implicit;return e.KtG(p.dismiss())}),e.qZA()(),e.TgZ(4,"div",34)(5,"div",35)(6,"form",36)(7,"div",37),e._UZ(8,"input",38),e.TgZ(9,"label",39),e._uU(10,"Name"),e.qZA(),e.YNc(11,q,4,3,"div",40),e.qZA(),e.TgZ(12,"div",37),e._UZ(13,"input",41),e.TgZ(14,"label",42),e._uU(15,"Budget Amount"),e.qZA(),e.YNc(16,N,3,2,"div",40),e.qZA()()()(),e.TgZ(17,"div",43)(18,"button",44),e.NdJ("click",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.onSaveClick())}),e._uU(19,"Save"),e.qZA()()}if(2&t){const n=e.oxw();let o,i;e.xp6(2),e.Oqu(n.isAddOperation?"Add Envelop":n.isUpdateOperation?"Update Envelop":"Envelop"),e.xp6(4),e.Q6J("formGroup",n.envelopForm),e.xp6(2),e.Q6J("ngClass",(null!=(o=n.envelopForm.get("name"))&&o.dirty||null!=(o=n.envelopForm.get("name"))&&o.touched)&&null!=(o=n.envelopForm.get("name"))&&o.invalid?"is-invalid":""),e.xp6(3),e.Q6J("ngIf",n.envelopForm.get("name").touched&&n.envelopForm.get("name").invalid),e.xp6(2),e.Q6J("ngClass",(null!=(i=n.envelopForm.get("amount"))&&i.dirty||null!=(i=n.envelopForm.get("amount"))&&i.touched)&&null!=(i=n.envelopForm.get("amount"))&&i.invalid?"is-invalid":""),e.xp6(3),e.Q6J("ngIf",n.envelopForm.get("amount").touched&&n.envelopForm.get("amount").invalid)}}function Y(t,l){if(1&t&&(e.TgZ(0,"span",47)(1,"strong"),e._uU(2),e.qZA()()),2&t){const n=e.oxw();e.xp6(2),e.Oqu(n.message)}}const O=[{path:"dashboard",component:h},{path:"",component:(()=>{class t{constructor(n,o,i,p){this.envelopService=n,this.localService=o,this.modalService=i,this.toastService=p,this.message="",this.envelops=[],this.totalMonthlyBudget=0,this.isGetCompleted=!0,this.isAddOperation=!1,this.isUpdateOperation=!1}ngOnInit(){this.getEnvelops()}getEnvelops(){let n={userId:this.localService.getJsonValue("userId")};this.isGetCompleted=!1,this.envelopService.getEnvelops(n).subscribe({next:o=>{this.envelops=o.body,this.calculateTotalSpending(),console.log(o.body)},error:o=>{console.error(o),alert(o?.error?.error)}}).add(()=>{this.isGetCompleted=!0})}calculateTotalSpending(){for(let n=0;n<this.envelops.length;n++){const o=this.envelops[n];this.totalMonthlyBudget+=parseInt(this.envelops[n].amount.toString()),o.showSpending=!1,o.totalSpending=0;for(let i=0;i<o.spendings.length;i++)o.totalSpending+=parseInt(o.spendings[i].amount);o.type=o.totalSpending/parseInt(o.amount.toString())*100<=50?"success":o.totalSpending/parseInt(o.amount.toString())*100<=75?"warning":"danger"}}onProgressClick(n){this.currentEnvelop=n}createEnvelopForm(){this.envelopForm=new r.cw({id:new r.NI(null),name:new r.NI(null,[r.kI.required,r.kI.minLength(2),r.kI.maxLength(255)]),amount:new r.NI(0,[r.kI.required,r.kI.min(1)]),userId:new r.NI(this.localService.getJsonValue("userId")),salaryId:new r.NI(null,[r.kI.required])})}onAddClick(){this.isAddOperation=!0,this.isUpdateOperation=!1,this.createEnvelopForm(),this.openModal(this.envelopModal)}onUpdateClick(n){this.isAddOperation=!1,this.isUpdateOperation=!0,this.createEnvelopForm(),this.envelopForm.patchValue(n),this.openModal(this.envelopModal)}onDeleteClick(){}onSaveClick(){console.log(this.envelopForm.controls),this.envelopForm.invalid?this.envelopForm.markAllAsTouched():this.isUpdateOperation?this.updateEnvelop():this.addEnvelop()}addEnvelop(){this.envelopService.addEnvelop(this.envelopForm.value).subscribe({next:n=>{console.log(n),this.modalRef.close(),this.getEnvelops()},error:n=>{console.error(n),alert(n?.error?.error)}})}updateEnvelop(){this.envelopService.updateEnvelop(this.envelopForm.value).subscribe({next:n=>{console.log(n),this.modalRef.close(),this.getEnvelops()},error:n=>{console.error(n),alert(n?.error?.error)}})}openModal(n,o="lg",i){i||(i={backdrop:"static",size:o,keyboard:!1}),this.modalRef=this.modalService.open(n,i)}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(u),e.Y36(c.C),e.Y36(v.FF),e.Y36(f.k))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-envelop"]],viewQuery:function(n,o){if(1&n&&(e.Gf(Z,5),e.Gf(C,5)),2&n){let i;e.iGM(i=e.CRH())&&(o.messageTemplate=i.first),e.iGM(i=e.CRH())&&(o.envelopModal=i.first)}},decls:19,vars:9,consts:[[1,"container","pt-5"],[1,"d-flex","justify-content-between","mb-3"],[1,"d-flex","justify-content-start"],["class","btn btn-dark disabled placeholder w-10",4,"ngIf"],["type","button","class","btn btn-dark",3,"click",4,"ngIf"],["class","row row-cols-1 row-cols-md-4 g-4",4,"ngIf"],[1,"row","row-cols-1","row-cols-md-4","g-4"],[4,"ngFor","ngForOf"],["noSpendingTemplate",""],["envelopModal",""],["messageTemplate",""],[1,"btn","btn-dark","disabled","placeholder","w-10"],["type","button",1,"btn","btn-dark",3,"click"],[1,"col"],["aria-hidden","true",1,"card","h-100"],[1,"card-body"],[1,"card-title","placeholder-glow"],[1,"d-flex","justify-content-between"],[1,"placeholder","rounded","w-50"],[1,"placeholder","rounded","w-25"],[1,"card","h-100"],[1,"d-flex","justify-content-between","cursor-pointer",3,"click"],[1,"card-title"],[1,"py-3"],[1,"cursor-pointer",3,"type","value","striped","animated","click"],["class","pb-3",4,"ngIf"],[1,"pb-3"],[4,"ngIf","ngIfElse"],[1,"table-responsive"],[1,"table","table-borderless"],[1,"text-center"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"row"],[3,"formGroup"],[1,"form-floating","mb-3"],["formControlName","name","type","text","id","nameFloatingInput","placeholder","Eg.: Shopping",1,"form-control",3,"ngClass"],["for","nameFloatingInput"],[4,"ngIf"],["formControlName","amount","type","number","id","amountFloatingInput","placeholder","Eg.: 1000",1,"form-control",3,"ngClass"],["for","amountFloatingInput"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-dark",3,"click"],["class","invalid-control",4,"ngIf"],[1,"invalid-control"],[1,"toast-font"]],template:function(n,o){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h3"),e._uU(3),e.qZA(),e.TgZ(4,"h3"),e._uU(5),e.ALo(6,"currency"),e.qZA(),e.TgZ(7,"div",2),e.YNc(8,x,1,0,"button",3),e.YNc(9,b,2,0,"button",4),e.qZA()(),e.YNc(10,E,29,0,"div",5),e.TgZ(11,"div",6),e.YNc(12,y,15,14,"ng-container",7),e.qZA()(),e.YNc(13,S,2,0,"ng-template",null,8,e.W1O),e.YNc(15,M,20,6,"ng-template",null,9,e.W1O),e.YNc(17,Y,3,1,"ng-template",null,10,e.W1O)),2&n&&(e.xp6(3),e.hij("Total envelops - ",(null==o.envelops?null:o.envelops.length)||0,""),e.xp6(2),e.hij("Monthly budget - ",e.xi3(6,6,o.totalMonthlyBudget,"INR"),""),e.xp6(3),e.Q6J("ngIf",!o.isGetCompleted),e.xp6(1),e.Q6J("ngIf",o.isGetCompleted),e.xp6(1),e.Q6J("ngIf",!o.isGetCompleted),e.xp6(2),e.Q6J("ngForOf",o.envelops))},dependencies:[a.mk,a.sg,a.O5,v.Ly,r._Y,r.Fj,r.wV,r.JJ,r.JL,r.sg,r.u,a.H9]}),t})()}];let Q=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[g.Bz.forChild(O),g.Bz]}),t})();var G=s(4466);let R=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({providers:[u],imports:[a.ez,Q,v.IJ,G.m]}),t})()}}]);